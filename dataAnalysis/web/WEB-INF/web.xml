<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE web-app PUBLIC "-//Sun Microsystems, Inc.//DTD Web Application 2.3//EN"
    "http://java.sun.com/dtd/web-app_2_3.dtd">

<web-app>
    <context-param>
        <param-name>javax.servlet.jsp.jstl.fmt.localizationContext</param-name>
        <param-value>ApplicationResources</param-value>
    </context-param>
    <context-param>
        <param-name>javax.servlet.jsp.jstl.fmt.fallbackLocale</param-name>
        <param-value>en</param-value>
    </context-param>
    <!--
    <context-param>
       <param-name>log4jConfigLocation</param-name>
       <param-value>/WEB-INF/config/properties/log4j.properties</param-value>
    </context-param>  -->  
    <!-- Context Configuration locations for Spring XML files -->
    <context-param>
        <param-name>contextConfigLocation</param-name>
        <param-value>/WEB-INF/config/spring/applicationContext-*.xml</param-value>
    </context-param>
    <context-param>
        <param-name>queryConfig</param-name>
        <param-value>/WEB-INF/config/queryConfig/query*.xml</param-value>
    </context-param>
       	
   <!--  <filter>
        <filter-name>signOnFilter</filter-name>
        <filter-class>com.liusy.core.web.filter.SignOnFilter</filter-class>
        <init-param>
            <param-name>NO_FILTER</param-name>
            <param-value>login,sysLogin,logout,sysLogout,cocall</param-value>
        </init-param>
   </filter>-->
   
   <filter>
        <filter-name>encodingFilter</filter-name>
        <filter-class>org.springframework.web.filter.CharacterEncodingFilter</filter-class>
        <init-param>
            <param-name>encoding</param-name>
            <param-value>UTF-8</param-value>
        </init-param>
        <init-param>
            <param-name>forceEncoding</param-name>
            <param-value>true</param-value>
        </init-param>
    </filter>

    <filter>
        <filter-name>hibernateFilter</filter-name>
        <filter-class>org.springframework.orm.hibernate3.support.OpenSessionInViewFilter</filter-class>
    </filter>

    
    <filter-mapping>
        <filter-name>encodingFilter</filter-name>
        <url-pattern>*.do</url-pattern>
    </filter-mapping>
    <filter-mapping>
        <filter-name>encodingFilter</filter-name>
        <url-pattern>*.jsp</url-pattern>
    </filter-mapping>
 	
    <filter-mapping>
        <filter-name>hibernateFilter</filter-name>
        <url-pattern>*.do</url-pattern>
    </filter-mapping>
    <filter-mapping>
	    <filter-name>hibernateFilter</filter-name>
	    <url-pattern>/ws/*</url-pattern>
    </filter-mapping>
	
    <listener>
        <listener-class>org.springframework.web.util.IntrospectorCleanupListener</listener-class>
    </listener>

	<listener>
        <listener-class>com.liusy.dataapplatform.listener.WebContextListener</listener-class>
    </listener>

    <servlet>
        <servlet-name>action</servlet-name>
        <servlet-class>com.liusy.dataapplatform.servlet.ThunisoftActionServlet</servlet-class>
           <init-param>
              <param-name>config</param-name>
              <param-value>
                  /WEB-INF/config/struts/struts-config.xml
              </param-value>
           </init-param> 
           <init-param>
              <param-name>configLocation</param-name>
                  <param-value>
                      /WEB-INF/config/struts
                  </param-value>
              </init-param>
        <load-on-startup>2</load-on-startup>
    </servlet>
        <servlet>
  	<servlet-name>Log4jConfigServlet</servlet-name> 
	<servlet-class>org.springframework.web.util.Log4jConfigServlet</servlet-class> 
    <load-on-startup>3</load-on-startup> 
  </servlet>  
    
   	<servlet>
        <servlet-name>VerifyCode</servlet-name>
        <servlet-class>com.liusy.core.util.VerifyCode</servlet-class>     
    </servlet>
        
    <!-- XFire WebService -->
	<servlet>
		<servlet-name>xfire</servlet-name>
		<servlet-class>org.codehaus.xfire.spring.XFireSpringServlet</servlet-class>
	</servlet>
    
    <servlet-mapping>    
	    <servlet-name>xfire</servlet-name>
	    <url-pattern>/ws/*</url-pattern>
    </servlet-mapping>      		
    <servlet-mapping>
        <servlet-name>action</servlet-name>
        <url-pattern>*.do</url-pattern>
    </servlet-mapping>
   
    <servlet-mapping>
        <servlet-name>VerifyCode</servlet-name>
        <url-pattern>/VerifyCode</url-pattern>
    </servlet-mapping>
    
    <!--  验证码开始-->
	<servlet>
  <servlet-name>Captcha</servlet-name>
  <servlet-class>nl.captcha.servlet.SimpleCaptchaServlet</servlet-class>
  <init-param>
            <param-name>width</param-name>
            <param-value>80</param-value>
        </init-param>
        <init-param>
            <param-name>height</param-name>
            <param-value>30</param-value>
        </init-param>
        <init-param>
            <param-name>fonts</param-name>
            <param-value>Times New Roman,Times New Roman</param-value>
        </init-param>
        <init-param>
            <param-name>fontsize</param-name>
            <param-value>30</param-value>
        </init-param>
        <init-param>
            <param-name>fontcolor</param-name>
            <param-value>255,237,197</param-value>
        </init-param>
 </servlet>
 <servlet-mapping>
  <servlet-name>Captcha</servlet-name>
  <url-pattern>/Captcha</url-pattern>
 </servlet-mapping>

	
	<!--  验证码结束-->
    <session-config>
        <session-timeout>30</session-timeout>
    </session-config>

    <welcome-file-list>
        <welcome-file>index.html</welcome-file> 
        <welcome-file>index.jsp</welcome-file>        
        <welcome-file>login.jsp</welcome-file>
    </welcome-file-list>
    
</web-app>